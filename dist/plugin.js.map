{"version":3,"file":"plugin.js","sources":["esm/index.js","esm/util.js","esm/widget.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Intercom = registerPlugin('Intercom', {\n    web: () => import('./web').then(m => new m.IntercomWeb()),\n});\nexport * from './definitions';\nexport { Intercom };\n//# sourceMappingURL=index.js.map","export const camelToSnakeCase = (str) => {\n    return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n};\nexport const objectKeysCamelToSnakeCase = (obj) => {\n    const dup = Object.assign({}, obj);\n    for (const k in dup) {\n        dup[camelToSnakeCase(k)] = dup[k];\n        delete dup[k];\n    }\n    return dup;\n};\n//# sourceMappingURL=util.js.map","/**\n * Snippet to initialize the Intercom instance\n *\n * @see {@link https://github.com/devrnt/react-use-intercom/blob/master/src/initialize.ts}\n * @see {@link https://developers.intercom.com/installing-intercom/docs/basic-javascript}\n *\n * @param appId - Intercom app id\n * @param [timeout=0] - Amount of milliseconds that the initialization should be delayed, defaults to 0\n */\nconst initialize = (appId, timeout = 0) => {\n    const w = window;\n    const ic = w.Intercom;\n    if (typeof ic === 'function') {\n        ic('reattach_activator');\n        ic('update', w.intercomSettings);\n    }\n    else {\n        const d = document;\n        const i = function (...args) {\n            i.c(args);\n        };\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        i.q = [];\n        i.c = function (...args) {\n            i.q.push(args);\n        };\n        w.Intercom = i;\n        const l = function () {\n            setTimeout(function () {\n                const s = d.createElement('script');\n                s.type = 'text/javascript';\n                s.async = true;\n                s.src = 'https://widget.intercom.io/widget/' + appId;\n                const x = d.getElementsByTagName('script')[0];\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                x.parentNode.insertBefore(s, x);\n            }, timeout);\n        };\n        if (document.readyState === 'complete') {\n            l();\n        }\n        else if (w.attachEvent) {\n            w.attachEvent('onload', l);\n        }\n        else {\n            w.addEventListener('load', l, false);\n        }\n    }\n};\nexport { initialize };\n//# sourceMappingURL=widget.js.map","import { WebPlugin } from '@capacitor/core';\nimport { objectKeysCamelToSnakeCase } from './util';\nimport { initialize as initializeWidget } from './widget';\nexport class IntercomWeb extends WebPlugin {\n    async boot(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        initializeWidget(options.app_id);\n        window.Intercom('boot', options);\n        this.setupListeners();\n        return Promise.resolve();\n    }\n    /**\n     * @deprecated\n     */\n    async registerIdentifiedUser(options) {\n        return this.loginUser(options);\n    }\n    async loginUser(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        window.Intercom('update', options);\n        return Promise.resolve();\n    }\n    /**\n     * @deprecated\n     */\n    async registerUnidentifiedUser() {\n        return this.loginUnidentifiedUser();\n    }\n    async loginUnidentifiedUser() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async updateUser(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        window.Intercom('update', options);\n        return Promise.resolve();\n    }\n    async logout() {\n        window.Intercom('shutdown');\n        return Promise.resolve();\n    }\n    async logEvent(options) {\n        window.Intercom('trackEvent', options.name, options.data);\n        return Promise.resolve();\n    }\n    async displayMessenger() {\n        return this.show();\n    }\n    async show() {\n        window.Intercom('show');\n        return Promise.resolve();\n    }\n    async displayInbox() {\n        window.Intercom('show');\n        return Promise.resolve();\n    }\n    async displayMessageComposer(options) {\n        window.Intercom('showNewMessage', options.message);\n        return Promise.resolve();\n    }\n    async displayHelpCenter() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async displayArticle(options) {\n        window.Intercom('showArticle', options.articleId);\n        return Promise.resolve();\n    }\n    async hideMessenger() {\n        window.Intercom('hide');\n        return Promise.resolve();\n    }\n    async hide() {\n        window.Intercom('hide');\n        return Promise.resolve();\n    }\n    async displayLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async enableLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async hideLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async disableLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async displayInAppMessages() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async enableMessengerPopups() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async hideInAppMessages() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async disableMessengerPopups() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async displayCarousel(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async setUserHash(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async setBottomPadding(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async receivePush(notification) {\n        notification;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async sendPushTokenToIntercom(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async unreadConversationCount() {\n        const payload = { value: this._unreadConversationCount };\n        return Promise.resolve(payload);\n    }\n    setupListeners() {\n        window.Intercom('onHide', this.notifyListeners('windowDidHide', null));\n        window.Intercom('onShow', this.notifyListeners('windowWDidShow', null));\n        window.Intercom('onUnreadCountChange', (unreadCount) => {\n            this._unreadConversationCount = unreadCount;\n            this.notifyListeners('onUnreadCountChange', unreadCount);\n        });\n    }\n}\nconst Intercom = new IntercomWeb();\nexport { Intercom };\n//# sourceMappingURL=web.js.map"],"names":["Intercom","registerPlugin","WebPlugin","initializeWidget"],"mappings":"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"}