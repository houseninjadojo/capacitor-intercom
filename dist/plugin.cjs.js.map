{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/util.js","esm/widget.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Intercom = registerPlugin('Intercom', {\n    web: () => import('./web').then(m => new m.IntercomWeb()),\n});\nexport * from './definitions';\nexport { Intercom };\n//# sourceMappingURL=index.js.map","export const camelToSnakeCase = (str) => {\n    return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n};\nexport const objectKeysCamelToSnakeCase = (obj) => {\n    const dup = Object.assign({}, obj);\n    for (const k in dup) {\n        dup[camelToSnakeCase(k)] = dup[k];\n        delete dup[k];\n    }\n    return dup;\n};\n//# sourceMappingURL=util.js.map","/**\n * Snippet to initialize the Intercom instance\n *\n * @see {@link https://github.com/devrnt/react-use-intercom/blob/master/src/initialize.ts}\n * @see {@link https://developers.intercom.com/installing-intercom/docs/basic-javascript}\n *\n * @param appId - Intercom app id\n * @param [timeout=0] - Amount of milliseconds that the initialization should be delayed, defaults to 0\n */\nconst initialize = (appId, timeout = 0) => {\n    const w = window;\n    const ic = w.Intercom;\n    if (typeof ic === 'function') {\n        ic('reattach_activator');\n        ic('update', w.intercomSettings);\n    }\n    else {\n        const d = document;\n        const i = function (...args) {\n            i.c(args);\n        };\n        i.q = [];\n        i.c = function (...args) {\n            i.q.push(args);\n        };\n        w.Intercom = i;\n        const l = function () {\n            setTimeout(function () {\n                const s = d.createElement('script');\n                s.type = 'text/javascript';\n                s.async = true;\n                s.src = 'https://widget.intercom.io/widget/' + appId;\n                const x = d.getElementsByTagName('script')[0];\n                x.parentNode.insertBefore(s, x);\n            }, timeout);\n        };\n        if (document.readyState === 'complete') {\n            l();\n        }\n        else if (w.attachEvent) {\n            w.attachEvent('onload', l);\n        }\n        else {\n            w.addEventListener('load', l, false);\n        }\n    }\n};\nexport { initialize };\n//# sourceMappingURL=widget.js.map","import { WebPlugin } from '@capacitor/core';\nimport { objectKeysCamelToSnakeCase } from './util';\nimport { initialize as initializeWidget } from './widget';\nexport class IntercomWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Intercom',\n            platforms: ['web'],\n        });\n    }\n    async boot(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        initializeWidget(options.app_id);\n        window.Intercom('boot', options);\n        this.setupListeners();\n        return Promise.resolve();\n    }\n    async registerIdentifiedUser(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        window.Intercom('update', options);\n        return Promise.resolve();\n    }\n    async registerUnidentifiedUser() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async updateUser(options) {\n        options = objectKeysCamelToSnakeCase(options);\n        window.Intercom('update', options);\n        return Promise.resolve();\n    }\n    async logout() {\n        window.Intercom('shutdown');\n        return Promise.resolve();\n    }\n    async logEvent(options) {\n        window.Intercom('trackEvent', options.name, options.data);\n        return Promise.resolve();\n    }\n    async displayMessenger() {\n        window.Intercom('show');\n        return Promise.resolve();\n    }\n    async displayMessageComposer(options) {\n        window.Intercom('showNewMessage', options.message);\n        return Promise.resolve();\n    }\n    async displayHelpCenter() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async hideMessenger() {\n        window.Intercom('hide');\n        return Promise.resolve();\n    }\n    async displayLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async hideLauncher() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async displayInAppMessages() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async hideInAppMessages() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async displayCarousel(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async setUserHash(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async setBottomPadding(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async receivePush(notification) {\n        notification;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async sendPushTokenToIntercom(options) {\n        options;\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async unreadConversationCount() {\n        const payload = { value: this._unreadConversationCount };\n        return Promise.resolve(payload);\n    }\n    setupListeners() {\n        window.Intercom('onHide', this.notifyListeners('onHide', null));\n        window.Intercom('onShow', this.notifyListeners('onHide', null));\n        window.Intercom('onUnreadCountChange', (unreadCount) => {\n            this._unreadConversationCount = unreadCount;\n            this.notifyListeners('onUnreadCountChange', unreadCount);\n        });\n    }\n}\nconst Intercom = new IntercomWeb();\nexport { Intercom };\n//# sourceMappingURL=web.js.map"],"names":["Intercom","registerPlugin","WebPlugin","initializeWidget"],"mappings":"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"}